# P2671 "[NOIP2015 普及组] 求和"
***您已经提交过此题但未通过！***

## 题目背景

NOIP2015 普及组 T3

## 题目描述

一条狭长的纸带被均匀划分出了$n$个格子，格子编号从$1$到$n$。每个格子上都染了一种颜色$color_i$用$[1,m]$当中的一个整数表示），并且写了一个数字$number_i$。

 ![](https://cdn.luogu.com.cn/upload/pic/1829.png) 

定义一种特殊的三元组：$(x,y,z)$，其中$x,y,z$都代表纸带上格子的编号，这里的三元组要求满足以下两个条件：

1. $xyz$是整数,$x<y<z,y-x=z-y$

2. $colorx=colorz$

满足上述条件的三元组的分数规定为$(x+z) \times (number_x+number_z)$。整个纸带的分数规定为所有满足条件的三元组的分数的和。这个分数可能会很大，你只要输出整个纸带的分数除以$10,007$所得的余数即可。

## 输入格式

第一行是用一个空格隔开的两个正整数$n$和$m,n$表纸带上格子的个数，$m$表纸带上颜色的种类数。

第二行有$n$用空格隔开的正整数，第$i$数字$number$表纸带上编号为$i$格子上面写的数字。

第三行有$n$用空格隔开的正整数，第$i$数字$color$表纸带上编号为$i$格子染的颜色。

## 输出格式

一个整数，表示所求的纸带分数除以$10007$所得的余数。

## 输入输出样例

输入 #1
```
6 2
5 5 3 2 2 2
2 2 1 1 2 1
```
输出 #1
```
82
```
输入 #2
```
15 4
5 10 8 2 2 2 9 9 7 7 5 6 4 2 4
2 2 3 3 4 3 3 2 4 4 4 4 1 1 1
```
输出 #2
```
1388
```

## 提示

【输入输出样例 1 说明】

纸带如题目描述中的图所示。

所有满足条件的三元组为： $(1, 3, 5), (4, 5, 6)$。

所以纸带的分数为$(1 + 5) \times (5 + 2) + (4 + 6) \times (2 + 2) = 42 + 40 = 82$。


对于第 $1$ 组至第 $2$ 组数据， $1 ≤ n ≤ 100, 1 ≤ m ≤ 5$；

对于第$ 3$ 组至第 $4$ 组数据， $1 ≤ n ≤ 3000, 1 ≤ m ≤ 100$；

对于第 $5$ 组至第$ 6 $组数据， $1 ≤ n ≤ 100000, 1 ≤ m ≤ 100000$，且不存在出现次数超过$ 20 $的颜色；

对 于 全 部 $10$ 组 数 据 ， $1 ≤ n ≤ 100000, 1 ≤ m ≤ 100000, 1 ≤ color_i ≤ m,1≤number_i≤100000$

## 时空限制
|测试点编号|时间限制|空间限制|
|:---:|:---:|:---:|
|$1$|$125MB$|$1s$|
|$2$|$125MB$|$1s$|
|$3$|$125MB$|$1s$|
|$4$|$125MB$|$1s$|
|$5$|$125MB$|$1s$|
|$6$|$125MB$|$1s$|
|$7$|$125MB$|$1s$|
|$8$|$125MB$|$1s$|
|$9$|$125MB$|$1s$|
|$10$|$125MB$|$1s$|

## 最后一次提交代码

```
#include <bits/stdc++.h>
using namespace std;
typedef long long ll;
const int MOD = 10007;
const int N = 100005;
ll n, m, ans, a[N], b[N], s1[N][2], s2[N][2];
int main()
{
    cin >> n >> m;
    for (int i = 1; i <= n; i++)
        cin >> a[i];
    for (int i = 1; i <= n; i++)
    {
        cin >> b[i];
        s1[b[i]][i % 2]++;
        s2[b[i]][i % 2] = (s2[b[i]][i % 2] + a[i]) % MOD;
    }
    for (int i = 1; i <= n; i++)
    {
        int y = b[i];
        ans += i * ((s2[y][i % 2] - a[i]) + a[i] * (s1[y][i % 2] - 1) % MOD) % MOD;
        ans %= MOD;
    }
    cout << ans << endl;
    return 0;
}
```

## 其他数据

|项目|值|
|:---:|:---:|
|难度|<span style="font-weight: bold; color: #52c41a">普及+/提高</span>|
|标签|<span style="display: inline-block; margin-right: 5px; margin-bottom: 5px; border-radius: 2px; color: white; padding: 0px 8px; background-color: #3498db; ">2015</span><span style="display: inline-block; margin-right: 5px; margin-bottom: 5px; border-radius: 2px; color: white; padding: 0px 8px; background-color: #2949b4; ">线性结构</span><span style="display: inline-block; margin-right: 5px; margin-bottom: 5px; border-radius: 2px; color: white; padding: 0px 8px; background-color: #13c2c2; ">NOIp 普及组</span><span style="display: inline-block; margin-right: 5px; margin-bottom: 5px; border-radius: 2px; color: white; padding: 0px 8px; background-color: #2949b4; ">排序</span><span style="display: inline-block; margin-right: 5px; margin-bottom: 5px; border-radius: 2px; color: white; padding: 0px 8px; background-color: #2949b4; ">前缀和</span>|
|提交人数|$56316$|
|通过人数|$13230$|
|通过率|$23.4924\%$|
|来源|`主题库`|
|最后一次提交语言|`自动识别语言`|

