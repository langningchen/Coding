# 0172 加加乘乘

## 题目描述

已知一个数列，你需要进行下面两种操作

1.将某区间每一个数乘x
2.将某区间每一个数加x
3.求某区间所有数之和

## 输入格式

第一行三个正整数N、M、P，表示该数列数字的个数、操作的总个数和模数（N,M<=100000）
第二行N个整数，表示数列的初始值

接下来M行每行包含3或4个整数，表示一个操作，具体如下：
1 x y k 将区间[x,y]内每个数乘上k
2 x y k 将区间[x,y]内每个数加上k
3 x y 输出区间[x,y]内每个数的和，结果%P

除N,M其他数值均小于1e9

## 输出格式

若干行整数，每行一个整数，表示所有操作3的结果

## 输入输出样例

输入 #1
```
5 5 38
1 5 4 2 3
2 1 4 1
3 2 5
1 2 4 2
2 3 5 5
3 1 4
```
输出 #1
```
17
2
```

## 其他数据

|项目|值|
|:---:|:---:|
|难度|<span style="text-align: center; display: inline-block; border-radius: 3px; color: white; width: 120px; height: 24px; background-color: yellowgreen">普及+/提高</span>|
|提交次数|$518$|
|提交人数|$172$|
|通过人数|$163$|
|通过率|$94.8\%$|

